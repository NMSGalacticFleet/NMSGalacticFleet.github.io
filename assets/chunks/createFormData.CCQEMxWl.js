import{d as k,s as d,h as x,o as _,b as j,w as B,j as h,t as E,n as I,k as n,c as C,a5 as N,ai as O,e as P,p as $,l as q,_ as J}from"./framework.B5VVsMDX.js";import{_ as R}from"./PicoStyle.vue_vue_type_script_setup_true_lang.BX4HGuFp.js";async function T(e,s){await fetch(e,{method:"POST",body:s})}async function V(e,s){try{const a=s.map(t=>T(e,t));await Promise.all(a)}catch(a){throw console.error("An error occurred:",a),a instanceof Error?a:new Error("Something went wrong!")}}const Q=1024,X=50,W=1500,z=e=>($("data-v-2e099715"),e=e(),q(),e),L=["aria-busy","disabled"],M={key:0},H=z(()=>h("span",null,"Send request",-1)),U=k({__name:"SubmitButton",props:{webhook:{},formDataArray:{},isIncomplete:{type:Boolean},isBusy:{type:Boolean},text:{}},emits:["success","fail"],setup(e,{emit:s}){const a=e,t=!1,r=d(!1),o=s,i=d(!1),l=d(!1),u=d(!1),m=d(!1);async function f(){try{if(a.isIncomplete)throw m.value=!0,new Error("incomplete");i.value=!0,await V(a.webhook,a.formDataArray),u.value=!0,o("success")}catch(c){console.warn("caught error:",c),o("fail"),l.value=!0}finally{i.value=!1,setTimeout(()=>{u.value=!1,l.value=!1,m.value=!1},W)}}const v=x(()=>a.text?a.text:m.value?"Please fill out all fields":i.value?"Sending...":l.value?"Failed!":u.value?"Sent!":"Submit");return(c,p)=>(_(),j(R,null,{default:B(()=>[h("button",{"aria-busy":i.value||c.isBusy,class:I({"is-error":l.value,"is-success":u.value}),disabled:i.value||c.isBusy,onClick:f},E(v.value),11,L),n(t)?(_(),C("label",M,[N(h("input",{"onUpdate:modelValue":p[0]||(p[0]=b=>r.value=b),role:"switch",type:"checkbox"},null,512),[[O,r.value]]),H])):P("",!0)]),_:1}))}}),Y=J(U,[["__scopeId","data-v-2e099715"]]),g=e=>e.replaceAll(/['"[\]{} ]/g,"_");function Z(e,s){const a=new File([e],`${g(s)}.md`,{type:"text/plain"}),t=new FormData;return t.append("file",a),t.append("payload_json",JSON.stringify({content:`Category: ${s}`,allowed_mentions:{parse:[]}})),t}function A(e){const s=new FormData;for(let a=0;a<((e==null?void 0:e.length)??0);a++){const t=e==null?void 0:e[a];t&&s.append(`image${a}`,t)}return s}function ee({requestType:e,requestText:s,contact:a}){const t=new FormData;return t.append("payload_json",JSON.stringify({allowed_mentions:{parse:[]},embeds:[{title:n(e),fields:[{name:"Message",value:n(s)},{name:"Contact",value:n(a)}]}]})),t}function ae(e,s,a,t){const r=new File([a],`${g(e)}.md`,{type:"text/plain"}),o=new FormData;return o.append("files[0]",t),o.append("payload_json",JSON.stringify({allowed_mentions:{parse:[]},embeds:[{title:"New Player Page Submission",image:{url:"attachment://"+t.name},fields:[{name:"Name",value:e},{name:"Short Description",value:"```"+s+"```"}]}],attachments:[{id:0,filename:t.name}]})),a&&o.append("content",r),o}function te(e){const a=Object.entries(e).map(y=>[y[0],y[1]||"No answer given"]),t=Object.fromEntries(a),{experience:r,find:o,enjoy:i,good:l,bad:u,project:m,departments:f,structure:v,home:c,server:p,transparency:b,citizenValue:D,news:S,otherFeedback:F}=t,w=new FormData;return w.append("payload_json",JSON.stringify({allowed_mentions:{parse:[]},embeds:[{title:"Feedback Submitted",fields:[{name:"Rate your overall experience in Eisvana (1-5)",value:n(r)},{name:"How did you find Eisvana?",value:n(o)},{name:"What do you enjoy doing in game?",value:n(i)},{name:"What does Eisvana do well?",value:n(l)},{name:"What could be improved?",value:n(u)},{name:"What kind of project would you participate in?",value:n(m)},{name:"Do you know about Eisvana's departments?",value:n(f)},{name:"How much do you agree with these statements? (1-5)",value:""},{name:"I understand Eisvana's organisational structure",value:n(v)},{name:'I feel "at home" in Eisvana',value:n(c)},{name:"Discord server is organised",value:n(p)},{name:"Leadership is transparent",value:n(b)},{name:"Citizens are valued",value:n(D)},{name:"I know about latest projects",value:n(S)},{name:"Other feedback:",value:n(F)}]}]})),w}export{Y as S,A as a,ae as b,Z as c,ee as d,g as e,te as f,W as g,X as h,Q as m};
